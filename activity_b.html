<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="utf-8">
    <title>Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø­Ø±ÙˆÙ Ø¨Ø§Ù„ØµÙˆØ±Ø© - Ù…Ø¹ Ø¹Ù…ÙˆØ¯ Ø¬Ø§Ù†Ø¨ÙŠ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        /* ===== Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ®Ø· ===== */
        :root {
            --display-box-width: 220px;
            --display-box-height: 220px;
            --display-bg-size: cover;
            --letter-size: 55px;
            --letter-bg-size: cover;
            --main-font-family: 'NotoSansArabic_Condensed-Bold', Arial, sans-serif;
        }

        @font-face {
            /* ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø®Ø· */
            font-family: 'NotoSansArabic_Condensed-Bold';
            src: url('fonts/NotoSansArabic_Condensed-Bold.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        /* ===== Ø³ØªØ§ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¹Ø§Ù… ===== */
        body {
            margin: 0;
            padding: 0;
            background: url('images/back_a_img.png') no-repeat center center;
            background-size: cover;
            font-family: var(--main-font-family);
            direction: rtl;
            -webkit-font-smoothing: antialiased;
        }

        /* ===== Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø´Ø¨ÙŠÙ‡Ø© Ø¨Ù†Ø´Ø§Ø· 1) ===== */
        .activity-container {
            width: 100%;
            max-width: 1000px;
            height: 80vh;
            max-height: 800px;
            margin: 4vh auto;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            /* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ + Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø¬Ù†Ø¨ Ø¨Ø¹Ø¶ */
            flex-direction: row;
            /* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
            overflow: visible;
        }

        /* ===== Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ (Ù†ÙØ³ Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£ÙˆÙ„) ===== */
        .sidebar {
            width: 16%;
            /* Ù†ÙØ³ Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£ÙˆÙ„ */
            background: #f3e8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
            /* ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØµÙÙˆÙ Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ */
            padding: 15px 10px;
            border-top-right-radius: 15px;
            border-bottom-right-radius: 15px;
            box-sizing: border-box;
        }

        .sidebar .row {
            /* ØµÙÙˆÙ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¹Ù…ÙˆØ¯ */
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* ===== Ø§Ù„ØµÙ 1: Ø§Ù„Ù†Ø¬ÙˆÙ… (Ø§Ù„ÙˆØ³Ø·Ù‰ Ø£Ø¹Ù„Ù‰ Ø´ÙˆÙŠØ©) ===== */
        .stars {
            direction: rtl;
            /* ğŸ‘ˆ ÙØ±Ø¶ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† */
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 6px;
        }

        .stars img {
            width: 30px;
            height: 30px;
            transition: transform 0.25s ease, filter 0.25s ease;
        }

        .stars img:nth-child(2) {
            transform: translateY(-6px);
        }

        /* Ø±ÙØ¹ Ø§Ù„Ù†Ø¬Ù…Ø© Ø§Ù„ÙˆØ³Ø·Ù‰ Ø¬Ù…Ø§Ù„ÙŠØ§Ù‹ */

        /* ===== Ø§Ù„ØµÙ 2: ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ ===== */
        .child-photo img {
            width: 110px;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        /* ===== Ø§Ù„ØµÙ 3: Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ (Ù…Ø³ØªØ·ÙŠÙ„) ===== */
        .student-name {
            margin: 0;
            padding: 0;
            text-align: center;
        }

        .student-name p {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
            background: #fff;
            border-radius: 12px;
            padding: 6px 12px;
            display: inline-block;

            /* âœ… Ù…Ù†Ø¹ Ø§Ù„Ø§Ù„ØªÙØ§Ù Ø¹Ù„Ù‰ Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯ */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            /* ÙŠØ¸Ù‡Ø± ... Ø¥Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ù‹Ø§ */
        }

        /* ===== Ø§Ù„ØµÙ 4: Ø§Ù„Ù…Ø¤Ù‚Øª ===== */
        .timer img {
            width: 80px;
            height: 100px;
            object-fit: contain;
        }

        /* ===== Ø§Ù„ØµÙ 5: Ø§Ù„ØªØ­ÙƒÙ… (Ø§Ù„Ù‡ÙˆÙ… ÙŠÙ…ÙŠÙ† - Ø±ÙŠØ³Øª ÙŠØ³Ø§Ø±) ===== */
        .controls {
            display: flex;
            justify-content: center;
            gap: 50px;
            width: 100%;
            box-sizing: border-box;
        }

        .controls .left {
            order: 2;
        }

        /* Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
        .controls .right {
            order: 1;
        }

        /* Ø§Ù„Ù‡ÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
        .controls img {
            width: 55px;
            height: 55px;
            cursor: pointer;
            transition: transform 0.15s ease;
        }

        .controls img:hover {
            transform: scale(1.08);
        }

        /* ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø· (ÙŠÙ…ÙŠÙ† Ø§Ù„Ø¹Ù…ÙˆØ¯) ===== */
        .activity-content {
            width: 84%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
            position: relative;
            box-sizing: border-box;
            border-top-left-radius: 15px;
            border-bottom-left-radius: 15px;
        }

        /* Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù†Ø´Ø§Ø· - Ù†ÙØ³ Ù…ÙˆØ¶Ø¹Ù‡ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£ØµÙ„ÙŠ */
        .activity-label {
            position: absolute;
            top: 10px;
            left: -45px;
            width: 180px;
            transform: rotate(-40deg);
            z-index: 5;
        }

        /* ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© (Ù…Ø³ØªØ¹Ø§Ø±Ø© Ù…Ù† Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø«Ø§Ù†ÙŠ) ===== */
        .match-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            width: 90%;
            max-width: 800px;
        }

        .result-icon {
            width: 100px;
            height: 100px;
            display: none;
        }

        .image-box {
            width: var(--display-box-width);
            height: var(--display-box-height);
            background: url('images/back_img.png') no-repeat center center;
            background-size: var(--display-bg-size);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-box img {
            max-width: calc(var(--display-box-width) - 40px);
            max-height: calc(var(--display-box-height) - 40px);
            border-radius: 12px;
        }

        .drop-zone {
            width: 150px;
            height: 150px;
            background: url('images/backaa_img.png') no-repeat center center;
            background-size: contain;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .drop-zone img {
            max-width: 80px;
            max-height: 80px;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ */
        .letters {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            max-width: 635px;
            margin-top: 10px;
            direction: rtl;
        }

        .letter {
            width: 50px;
            height: 50px;
            background: url('images/back_letter.png') no-repeat center center;
            background-size: cover;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: transform .15s ease;
            font-family: var(--main-font-family);
        }

        .letter:active {
            transform: scale(1.05);
            cursor: grabbing;
        }

        .dropped-letter {
            width: 90px !important;
            height: 90px !important;
            background: linear-gradient(45deg, #cc66ff, #d88dfd) !important;
            font-size: 36px !important;
            font-weight: bold !important;
            border: 3px solid white !important;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3) !important;
            border-radius: 20px !important;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>

    <div class="activity-container">
        <!-- ===== Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ (ØµÙÙˆÙ 5) ===== -->
        <div class="sidebar">
            <!-- Ø§Ù„ØµÙ 1: 3 Ù†Ø¬ÙˆÙ… (Ø§Ù„ÙˆØ³Ø·Ù‰ Ø£Ø¹Ù„Ù‰ Ù‚Ù„ÙŠÙ„Ø§Ù‹) -->
            <div class="row stars">
                <img id="star1" src="images/star1.png" alt="Ù†Ø¬Ù…Ø© 1"> <!-- Ù†Ø¬Ù…Ø© 1 (Ø£ØµÙØ± Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹) -->
                <img id="star2" src="images/star2.png" alt="Ù†Ø¬Ù…Ø© 2"> <!-- Ù†Ø¬Ù…Ø© 2 (Ø£ÙˆØ³Ø· Ù…Ø±ØªÙØ¹) -->
                <img id="star3" src="images/star3.png" alt="Ù†Ø¬Ù…Ø© 3"> <!-- Ù†Ø¬Ù…Ø© 3 -->
            </div>

            <!-- Ø§Ù„ØµÙ 2: ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ (Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¥Ù† Ø£Ø±Ø¯Øª) -->
            <div class="row child-photo">
                <img id="childPhoto" src="images/child_photo.png" alt="ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„">
            </div>

            <!-- Ø§Ù„ØµÙ 3: Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø«Ù†Ø§Ø¦ÙŠ) -->
            <div class="row student-name">
                <p id="studentName">Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯</p>
            </div>

            <!-- Ø§Ù„ØµÙ 4: Ø§Ù„Ù…Ø¤Ù‚Øª -->
            <div class="row timer">
                <img id="timerImage" src="images/timer.png" alt="Ù…Ø¤Ù‚Øª Ø§Ù„Ù†Ø´Ø§Ø·">
            </div>

            <!-- Ø§Ù„ØµÙ 5: Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ù‡ÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± -->
            <div class="row controls">
                <img class="right icon-home" src="images/home.png" alt="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"> <!-- Ø§Ù„Ù‡ÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† -->
                <img class="left icon-retry" src="images/retry.png" alt="Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„">
                <!-- Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± -->
            </div>
        </div>

        <!-- ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø· (Ù…Ø·Ø§Ø¨Ù‚Ø©) ===== -->
        <div class="activity-content">
            <!-- Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù†Ø´Ø§Ø· -->
            <img class="activity-label" src="images/actv_2.png" alt="Activity Label">

            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© -->
            <div class="match-area">
                <img id="resultIcon" class="result-icon" src="" alt="Ù†ØªÙŠØ¬Ø©"> <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© ØµØ­/Ø®Ø·Ø£ -->


                <div class="drop-zone" id="dropZone">
                    <img src="images/question_img.png" alt="?" id="questionMark">
                </div>
                <div class="image-box">
                    <img id="matchImage" src="" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ù…Ø·Ø§Ø¨Ù‚ØªÙ‡Ø§">
                </div>




            </div>

            <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ -->
            <div class="letters" id="lettersGrid"></div>
        </div>
    </div>

    <script>

        document.addEventListener('DOMContentLoaded', function () {
            // âœ… Ø¹Ø±Ø¶ Ø§Ø³Ù… ÙˆØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø´Ø§Ø´Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const storedName = sessionStorage.getItem('userName');
            const storedImage = sessionStorage.getItem('userImage');

            if (storedName) {
                document.getElementById('studentName').textContent = storedName;
            }

            if (storedImage) {
                document.getElementById('childPhoto').src = storedImage;
            }
        });



        /* ================== Ù…ØµÙÙˆÙØ© Ø§Ù„Ø­Ø±ÙˆÙ (Ø«Ø§Ø¨ØªØ© ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£ØµÙ„ÙŠ) ================== */
        const arabicLetters = [
            'Ø£', 'Ø¨', 'Øª', 'Ø«', 'Ø¬', 'Ø­', 'Ø®',
            'Ø¯', 'Ø°', 'Ø±', 'Ø²', 'Ø³', 'Ø´', 'Øµ',
            'Ø¶', 'Ø·', 'Ø¸', 'Ø¹', 'Øº', 'Ù', 'Ù‚',
            'Ùƒ', 'Ù„', 'Ù…', 'Ù†', 'Ù‡', 'Ùˆ', 'ÙŠ'
        ];

        /* ===== Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø© ===== */
        let currentLetter = 0;      // Ø±Ù‚Ù… Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø­Ø§Ù„ÙŠ (1..28)
        let isAnswered = false;     // Ù‡Ù„ Ø£Ø¬Ø§Ø¨ Ø§Ù„Ø·ÙÙ„ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„
        let correctAnswers = 0;     // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ø§Ù„ÙƒÙ„ÙŠØ© (Ù„Ù„ØªÙ‚Ø¯Ù…)
        const initialStarSrc = ['images/star1.png', 'images/star2.png', 'images/star3.png']; // ØµÙˆØ± Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©

        /* Ù†Ù†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ DOM Ø«Ù… Ù†Ù‡ÙŠØ¡ Ø§Ù„Ù†Ø´Ø§Ø· ÙˆØ§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø¹Ù†Ø§ØµØ± */
        document.addEventListener('DOMContentLoaded', function () {

            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            const lettersGrid = document.getElementById('lettersGrid'); // Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ
            const matchImage = document.getElementById('matchImage');   // ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„
            const resultIcon = document.getElementById('resultIcon');   // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµØ­/Ø§Ù„ØºÙ„Ø·
            const dropZone = document.getElementById('dropZone');       // Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø³Ù‚Ø§Ø·
            const starElems = [document.getElementById('star1'), document.getElementById('star2'), document.getElementById('star3')]; // Ø§Ù„Ù†Ø¬ÙˆÙ…
            const homeBtn = document.querySelector('.icon-home');       // Ø²Ø± Ø§Ù„Ù‡ÙˆÙ… 
            const retryBtn = document.querySelector('.icon-retry');     // Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„



            // Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ…
            homeBtn.addEventListener('click', function () { // Ù†Ù‚Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                window.location.href = 'activities.html';
            });

            retryBtn.addEventListener('click', function () { // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø´Ø§Ø·
                resetActivity();
            });

            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„
            showNewQuestion();

            /* ===== Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ ===== */
            function showNewQuestion() {
                isAnswered = false;
                // Ø¥Ø¹Ø§Ø¯Ø© ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ dropZone
                dropZone.innerHTML = '<img src="images/question_img.png" alt="?" id="questionMark">';

                // Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                resultIcon.style.display = 'none';

                // Ø§Ø®ØªÙŠØ§Ø± Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ (1..28)
                currentLetter = Math.floor(Math.random() * arabicLetters.length) + 1;

                // ØªØ¹ÙŠÙŠÙ† ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ (ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„ØµÙˆØ± Ù…Ø³Ù…Ø§Ø© photo1.png .. photo28.png)
                matchImage.src = `images/photo${currentLetter}.png`;

                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ (ØªØ¸Ù‡Ø± ÙƒÙ„ Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØªØµØ¨Ø­ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨)
                lettersGrid.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
                arabicLetters.forEach(letter => {
                    const div = document.createElement('div');
                    div.className = 'letter';
                    div.textContent = letter;
                    div.draggable = true;
                    div.addEventListener('dragstart', dragStartHandler);
                    lettersGrid.appendChild(div);
                });

                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø¯Ø« Ø§Ù„Ø¥Ø³Ù‚Ø§Ø· (ÙƒÙ„ Ù…Ø±Ø© Ù†Ø¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ†Ù‡ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ†)
                setupDropZone();
            }

            /* ===== Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ ===== */
            function dragStartHandler(e) {
                e.dataTransfer.setData('text/plain', this.textContent);
            }

            /* ===== ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù€ drop zone ===== */
            function setupDropZone() {
                // Ù†Ù„ØºÙŠ Ø£ÙŠ Ø­Ø¯Ø« Ø³Ø§Ø¨Ù‚ (Ù„Ùˆ ÙˆØ¬Ø¯) Ø«Ù… Ù†Ø¶ÙŠÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                dropZone.ondragover = function (e) { e.preventDefault(); };
                dropZone.ondrop = function (e) {
                    if (isAnswered) return; // Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙØ¹Ù„Ø§Ù‹ØŒ Ù„Ø§ Ù†Ø³Ù…Ø­ Ø¨ØªÙƒØ±Ø§Ø±

                    e.preventDefault();
                    const data = e.dataTransfer.getData('text/plain');
                    const droppedLetter = data;
                    const correctLetter = arabicLetters[currentLetter - 1]; // Ø­Ø±Ù Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­ Ø­Ø³Ø¨ Ø§Ù„ÙÙ‡Ø±Ø³
                    // Ø¥Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                    if (droppedLetter === correctLetter) {
                        isAnswered = true;

                        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø¸Ø§Ù‡Ø± Ø¯Ø§Ø®Ù„ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø³Ù‚Ø§Ø· Ø¨Ù…Ø¸Ù‡Ø± Ø¬Ù…ÙŠÙ„
                        const droppedElement = document.createElement('div');
                        droppedElement.className = 'dropped-letter';
                        droppedElement.textContent = droppedLetter;

                        dropZone.innerHTML = ''; // Ø¥Ø²Ø§Ù„Ø© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø³Ø¤Ø§Ù„
                        dropZone.appendChild(droppedElement); // ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ù…Ø³Ù‚Ø·

                        // Ø¹Ø±Ø¶ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµØ­ ÙˆØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø­Ø±Ù
                        resultIcon.src = 'images/right.png';
                        resultIcon.style.display = 'block';
                        playSoundSafe(`sounds/ph${currentLetter}.mp3`);

                        // ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ… Ø¥Ø°Ø§ Ù„Ø²Ù…
                        correctAnswers++;
                        updateStarsByProgress();

                        // Ø¨Ø¹Ø¯ Ù‚Ù„ÙŠÙ„ Ù†Ø°Ù‡Ø¨ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
                        setTimeout(showNewQuestion, 1800);

                    } else {
                        // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©: Ø¹Ø±Ø¶ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø®Ø·Ø£ ÙˆØªØ´ØºÙŠÙ„ ØµÙˆØª Ø®Ø·Ø£
                        resultIcon.src = 'images/wrong.png';
                        resultIcon.style.display = 'block';
                        playSoundSafe('sounds/wrong.mp3');

                        // Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø®Ø·Ø£ Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø© (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©)
                        setTimeout(() => {
                            resultIcon.style.display = 'none';
                        }, 1400);
                    }
                };
            }

            /* ===== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ… Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© =====
                   Ø£ÙˆÙ„ Ù†Ø¬Ù…Ø© ØªØªØ­ÙˆÙ„ Ø¨Ø¹Ø¯ 3 Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø© (Ù†Ø­Ùˆ 1..3 => Ø¨Ø¹Ø¯ 3)
                   Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 6 Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©
                   Ø§Ù„Ø«Ø§Ù„Ø«Ø© Ø¨Ø¹Ø¯ 9 Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©
            */

            // âœ… Ø¯Ø§Ù„Ø© Ù…ÙˆØ­Ø¯Ø© Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†Ø¬ÙˆÙ…
            function animateStar(starEl) {
                starEl.style.transform = 'translateX(15px) scale(1.25)'; // Ø­Ø±ÙƒØ© Ø§Ù„Ù†Ø¬Ù…Ø©
                setTimeout(() => {
                    starEl.style.transform = ''; // Ø¥Ø±Ø¬Ø§Ø¹Ù‡Ø§ Ù„Ù…ÙƒØ§Ù†Ù‡Ø§
                }, 250);
            }


            function updateStarsByProgress() {
                // Ø§Ù„ØªØºÙŠÙŠØ± ÙŠØªÙ… ÙÙ‚Ø· Ø¹Ù†Ø¯ ÙƒÙ„ 3 Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©
                if (correctAnswers % 3 === 0) {
                    const index = (correctAnswers / 3) - 1; // 0 Ø¹Ù†Ø¯ 3ØŒ 1 Ø¹Ù†Ø¯ 6ØŒ 2 Ø¹Ù†Ø¯ 9
                    if (index >= 0 && index < starElems.length) {
                        const starEl = starElems[index];
                        if (!starEl.dataset.activated) {
                            starEl.src = 'images/star_red.png'; // Ù†Ø¬Ù…Ø© Ø­Ù…Ø±Ø§Ø¡
                            starEl.dataset.activated = '1';

                            animateStar(starEl); // âœ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©

                        }
                    }
                }
            }




            /* ===== Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø§Ø· (Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„) ===== */
            function resetActivity() {
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¬ÙˆÙ… Ù„Ù„ØµÙˆØ± Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©
                correctAnswers = 0;
                for (let i = 0; i < starElems.length; i++) {
                    starElems[i].src = initialStarSrc[i]; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
                    delete starElems[i].dataset.activated; // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ÙˆØ³Ù…
                    starElems[i].style.transform = '';
                }
                // Ø¥Ø¹Ø§Ø¯Ø© Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯
                showNewQuestion();
            }

            /* Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª Ù…Ø¹ ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¥Ù† Ù„Ù… ØªØªÙˆÙØ± Ø§Ù„Ù…Ù„ÙØ§Øª */
            function playSoundSafe(src) {
                try {
                    const a = new Audio(src);
                    a.play().catch(() => { /* ØªØ¬Ø§Ù‡Ù„ Ø®Ø·Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„ */ });
                } catch (e) { }
            }

            // Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ù„Ùˆ Ø­Ø¨ÙŠØª ØªÙØ¹Ù„ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ø§ Ù†ÙØ¹Ù„)
            // resetActivity();

        }); // end DOMContentLoaded

        // Ù…Ù†Ø¹ Ù‚Ø§Ø¦Ù…Ø© ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ† ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£ÙˆÙ„
        document.addEventListener('contextmenu', function (e) { e.preventDefault(); });
    </script>

</body>

</html>