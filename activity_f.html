<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø³Ø§Ø¯Ø³</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* ğŸ”¹ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø®Ø· Ø§Ù„Ù…Ø®ØµØµ Ù„Ù„Ù†Ø´Ø§Ø· */
        @font-face {
            font-family: 'NotoSansArabic_Condensed-Bold';
            src: url('fonts/NotoSansArabic_Condensed-Bold.ttf') format('truetype');
        }

        /* ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ===== */
        body {
            margin: 0;
            padding: 0;
            background: url('images/back_a_img.png') no-repeat center center;
            background-size: cover;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'NotoSansArabic_Condensed-Bold', sans-serif;
            overflow: hidden;
        }

        /* ===== Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù†Ø´Ø§Ø· ===== */
        .activity-container {
            width: 100%;
            max-width: 1000px;
            height: 80vh;
            max-height: 800px;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: row-reverse;
            /* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        /* ===== Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ===== */
        .sidebar {
            width: 15%;
            /* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ÙŠÙ…Ø«Ù„ 15% Ù…Ù† Ø§Ù„Ù†Ø´Ø§Ø· */
            background: #f3e8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
            padding: 15px 5px;
            border-top-right-radius: 15px;
            border-bottom-right-radius: 15px;
            box-sizing: border-box;
            height: 100%;
        }

        .sidebar .row {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* â­ Ø§Ù„ØµÙ 1: Ø§Ù„Ù†Ø¬ÙˆÙ… */
        .stars {
            direction: rtl;
            /* ğŸ‘ˆ ÙØ±Ø¶ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† */
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 6px;
        }

        .stars img {
            width: 30px;
            height: 30px;
            transition: transform .25s ease, filter .25s ease;
        }

        .stars img:nth-child(2) {
            transform: translateY(-6px);
            /* Ø±ÙØ¹ Ø§Ù„Ù†Ø¬Ù…Ø© Ø§Ù„ÙˆØ³Ø·Ù‰ Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¬Ù…Ø§Ù„ÙŠ */
        }

        /* âœï¸ Ø§Ù„ØµÙ 2: ØµÙˆØ±Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ */
        .child-photo img {
            width: 110px;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        /* âœï¸ Ø§Ù„ØµÙ 3: Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ */

        .student-name {
            margin: 0;
            padding: 0;
            text-align: center;
        }

        .student-name p {
            margin: 0;
            font-size: 16px;
            font-weight: bold;
            background: #fff;
            border-radius: 12px;
            padding: 6px 12px;
            display: inline-block;

            /* âœ… Ù…Ù†Ø¹ Ø§Ù„Ø§Ù„ØªÙØ§Ù Ø¹Ù„Ù‰ Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯ */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            /* ÙŠØ¸Ù‡Ø± ... Ø¥Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ù‹Ø§ */
        }

        /* â±ï¸ Ø§Ù„ØµÙ 4: Ø§Ù„Ù…Ø¤Ù‚Øª */
        .timer img {
            width: 70px;
            height: 70px;
            object-fit: contain;
        }

        /* ğŸ ğŸ”„ Ø§Ù„ØµÙ 5: Ø§Ù„ØªØ­ÙƒÙ… (Ù‡ÙˆÙ… ÙˆØ±ÙŠØ³Øª) */
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            width: 100%;
            box-sizing: border-box;
        }

        .controls .right {
            order: 2;
            /* Ø§Ù„Ù‡ÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
        }

        .controls .left {
            order: 1;
            /* Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
        }

        .controls img {
            width: 50px;
            height: 50px;
            cursor: pointer;
            transition: transform 0.15s ease;
        }

        .controls img:hover {
            transform: scale(1.08);
        }

        /* ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø· ===== */
        .content-area {
            width: 85%;
            /* 85% Ù„Ù„Ù†Ø´Ø§Ø· Ù†ÙØ³Ù‡ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;
            height: 100%;
            position: relative;
        }

        /* ØµÙˆØ±Ø© Ø§Ù„Ù†Ø´Ø§Ø· */
        .activity-label {
            position: absolute;
            top: 10px;
            left: -45px;
            width: 180px;
            height: auto;
            transform: rotate(-40deg);
            border-radius: 10px;
            padding: 5px;
        }

        /* Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¨Ø®Ù„ÙÙŠØ© ØµÙˆØ±Ø© */
        .image-box {
            width: 85%;
            max-width: 220px;
            height: 220px;
            background: url('images/back_img.png') no-repeat center center;
            background-size: cover;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-box img {
            max-width: 180px;
            max-height: 180px;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù†Ø§Ù‚ØµØ© */
        .word-drop-zone {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70px;
            width: 90%;
            max-width: 400px;
            background: #ffffcc;
            border: 8px solid #ff9966;
            border-radius: 10px;
            padding: 10px;
            font-size: 45px;
            font-weight: bold;
            font-family: 'NotoSansArabic_Condensed-Bold', sans-serif;
            direction: rtl;
            color: #1505ee;
            transition: box-shadow 0.5s ease-in-out;
            cursor: pointer;
        }

        .missing-letter {
            display: inline-block;
            margin: 0 2px;
            font-family: 'NotoSansArabic_Condensed-Bold', sans-serif;
            color: red;
            /* Ø§Ù„Ø´Ø±Ø·Ø© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ù†Ø§Ù‚Øµ */
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ */
        .letters-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            max-width: 635px;
            margin: 0 auto;
            direction: rtl;
        }

        /* Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨ */
        .letters-grid .letter {
            width: 50px;
            height: 50px;
            background: url('images/back_letter.png') no-repeat center center;
            background-size: cover;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            font-weight: bold;
            color: white;
            cursor: grab;
            font-family: 'NotoSansArabic_Condensed-Bold', sans-serif;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }

        .letters-grid .letter:hover {
            transform: scale(1.1);
        }

        /* ÙˆÙ…ÙŠØ¶ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© */
        .glowing-box {
            animation: correctGlow 1.5s ease-in-out 3;
        }

        @keyframes correctGlow {
            0% {
                box-shadow: 0 0 0 #4CAF50;
            }

            50% {
                box-shadow: 0 0 30px 10px #4CAF50;
            }

            100% {
                box-shadow: 0 0 0 #4CAF50;
            }
        }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø´Ø§Ø· */
        .difficulty-options {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .difficulty-options img {
            width: 35px;
            height: 35px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .difficulty-options img:hover {
            transform: scale(1.1);
        }
    </style>
</head>

<body>
    <div class="activity-container">

        <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
        <div class="sidebar">
            <!-- â­ Ø§Ù„Ù†Ø¬ÙˆÙ… -->
            <div class="row stars">
                <img id="star1" src="images/star1.png" alt="Ù†Ø¬Ù…Ø© 1">
                <img id="star2" src="images/star2.png" alt="Ù†Ø¬Ù…Ø© 2">
                <img id="star3" src="images/star3.png" alt="Ù†Ø¬Ù…Ø© 3">
            </div>

            <!-- ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ -->
            <div class="row child-photo">
                <img id="childPhoto" src="images/child_photo.png" alt="ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„"> <!-- âœ… Ø¥Ø¶Ø§ÙØ© id -->
            </div>
            <!-- Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ -->
            <div class="row student-name">
                <p id="studentName">Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯</p> <!-- âœ… Ø¥Ø¶Ø§ÙØ© id -->
            </div>



            <!-- Ø§Ù„Ù…Ø¤Ù‚Øª -->
            <div class="row timer">
                <img src="images/timer.png" alt="Ù…Ø¤Ù‚Øª">
            </div>

            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
            <div class="row controls">
                <div class="right"><img id="homeBtn" src="images/home.png" alt="ØµÙØ­Ø© Ø§Ù„Ø£Ù†Ø´Ø·Ø©"></div>
                <div class="left"><img id="retryBtn" src="images/retry.png" alt="Ø¥Ø¹Ø§Ø¯Ø©"></div>
            </div>
        </div>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†Ø´Ø§Ø· -->
        <div class="content-area">
            <!-- ØµÙˆØ±Ø© Ø§Ù„Ù†Ø´Ø§Ø· -->
            <img src="images/actv_6.png" class="activity-label" alt="Ù†Ø´Ø§Ø· 6">

            <!-- Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø¨Ø®Ù„ÙÙŠØ© ØµÙˆØ±Ø© -->
            <div class="image-box" id="imageBox"></div>

            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù†Ø§Ù‚ØµØ© -->
            <div class="word-drop-zone" id="wordDropZone" data-correct-letter="" data-word=""></div>

            <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ -->
            <div class="letters-grid" id="lettersGrid"></div>

            <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø´Ø§Ø· -->
            <div class="difficulty-options">
                <img src="images/letter_a.png" alt="Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„" onclick="setLevel(1)">
                <img src="images/letter_b.png" alt="Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ" onclick="setLevel(2)">
                <img src="images/letter_c.png" alt="Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø«" onclick="setLevel(3)">
            </div>

            <!-- Ø§Ù„Ø£ØµÙˆØ§Øª -->
            <audio id="correctSound" src="sounds/correct.mp3"></audio>
            <audio id="wrongSound" src="sounds/wrong.mp3"></audio>
            <audio id="applauseSound" src="sounds/clap.mp3"></audio>
        </div>
    </div>

    <script>






        document.addEventListener('DOMContentLoaded', function () {
            // âœ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø´Ø§Ø´Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const storedName = sessionStorage.getItem('userName');   // Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const storedImage = sessionStorage.getItem('userImage'); // ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Base64)

            // âœ… Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø®ØµØµ Ù„Ù‡
            if (storedName) {
                const nameElement = document.getElementById('studentName');
                if (nameElement) {
                    nameElement.textContent = storedName;
                }
            }

            // âœ… Ø¹Ø±Ø¶ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø®ØµØµ Ù„Ù‡Ø§
            if (storedImage) {
                const photoElement = document.getElementById('childPhoto');
                if (photoElement) {
                    photoElement.src = storedImage;
                }
            }

            // ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ÙÙ‚Ø· ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØµÙˆØ±Ø©
            // Ø¬Ù…ÙŠØ¹ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®Ø±Ù‰ (Ø§Ù„Ø­Ø±ÙˆÙØŒ Ø§Ù„Ù†Ø¬ÙˆÙ…ØŒ Ø§Ù„Ø£ØµÙˆØ§ØªØŒ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©...) ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„
        });





        let currentLevel = 1; // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ
        let correctAnswers = 0; // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
        let isWaiting = false;  // Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©

        // âœ… ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1
        const wordsLevel1 = [
            { id: 1, word: "ÙÙŠÙ„", missing: "Ù", shaped: ["ÙÙ€", "ÙŠÙ€", "Ù„"] },
            { id: 2, word: "Ø£Ø³Ø¯", missing: "Ø£", shaped: ["Ø£", "Ø³Ù€", "Ø¯"] },
            { id: 3, word: "Ù‚Ù„Ù…", missing: "Ù‚", shaped: ["Ù‚Ù€", "Ù„Ù€", "Ù…"] },
            { id: 4, word: "Ù…Ø±ÙƒØ¨", missing: "Ù…", shaped: ["Ù…Ù€", "Ø±", "ÙƒÙ€", "Ø¨"] },
            { id: 5, word: "Ù†Ù…Ø±", missing: "Ù†", shaped: ["Ù†Ù€", "Ù…Ù€", "Ø±"] },
            { id: 6, word: "Ø¯ÙŠÙƒ", missing: "Ø¯", shaped: ["Ø¯", "ÙŠÙ€", "Ùƒ"] },
            { id: 7, word: "Ø·Ø§Ø¦Ø±Ø©", missing: "Ø·", shaped: ["Ø·Ù€", "Ø§", "Ø¦", "Ø±", "Ø©"] },
            { id: 8, word: "Ù‚Ù…Ø±", missing: "Ù‚", shaped: ["Ù‚Ù€", "Ù…Ù€", "Ø±"] },
            { id: 9, word: "Ø³Ù…ÙƒØ©", missing: "Ø³", shaped: ["Ø³Ù€", "Ù…Ù€", "ÙƒÙ€", "Ø©"] },
            { id: 10, word: "ÙØ³ØªØ§Ù†", missing: "Ù", shaped: ["ÙÙ€", "Ø³Ù€", "ØªÙ€", "Ø§", "Ù†"] }
        ];

        // âœ… ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2
        const wordsLevel2 = [
            { id: 11, word: "Ù‚Ø·Ø©", missing: "Ø·", shaped: ["Ù‚Ù€", "Ø·Ù€", "Ù€Ø©"] },
            { id: 12, word: "ÙƒØªØ§Ø¨", missing: "Øª", shaped: ["ÙƒÙ€", "ØªÙ€", "Ø§", "Ø¨"] },
            { id: 13, word: "Ø¨ÙŠØª", missing: "ÙŠ", shaped: ["Ø¨Ù€", "ÙŠÙ€", "Øª"] },
            { id: 14, word: "ÙˆÙ„Ø¯", missing: "Ù„", shaped: ["Ùˆ", "Ù„Ù€", "Ø¯"] },
            { id: 15, word: "Ø¹Ù†Ø¨", missing: "Ù†", shaped: ["Ø¹Ù€", "Ù†Ù€", "Ø¨"] },
            { id: 16, word: "Ø¬Ø²Ø±", missing: "Ø²", shaped: ["Ø¬Ù€", "Ø²", "Ø±"] },
            { id: 17, word: "ØªÙØ§Ø­", missing: "Ù", shaped: ["ØªÙ€", "ÙÙ€", "Ø§", "Ø­"] },
            { id: 18, word: "Ù…ÙˆØ²", missing: "Ùˆ", shaped: ["Ù…Ù€", "Ùˆ", "Ø²"] },
            { id: 19, word: "Ø¯Ø¨", missing: "Ø¨", shaped: ["Ø¯", "Ø¨"] },
            { id: 20, word: "Ø±Ù…Ø§Ù†", missing: "Ù…", shaped: ["Ø±", "Ù…Ù€", "Ø§", "Ù†"] }
        ];

        // âœ… ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3
        const wordsLevel3 = [
            { id: 21, word: "Ø¨Ù†Øª", missing: "Øª", shaped: ["Ø¨Ù€", "Ù†Ù€", "Øª"] },
            { id: 22, word: "Ø£ØªÙˆØ¨ÙŠØ³", missing: "Ø³", shaped: ["Ø£", "ØªÙ€", "Ùˆ", "Ø¨Ù€", "ÙŠÙ€", "Ø³"] },
            { id: 23, word: "Ø­ØµØ§Ù†", missing: "Ù†", shaped: ["Ø­Ù€", "ØµÙ€", "Ø§", "Ù†"] },
            { id: 24, word: "Ø¶ÙØ¯Ø¹", missing: "Ø¹", shaped: ["Ø¶Ù€", "ÙÙ€", "Ø¯", "Ø¹"] },
            { id: 25, word: "Ø·Ù…Ø§Ø·Ù…", missing: "Ù…", shaped: ["Ø·Ù€", "Ù…Ù€", "Ø§", "Ø·Ù€", "Ù…"] },
            { id: 26, word: "ØµÙ†Ø¯ÙˆÙ‚", missing: "Ù‚", shaped: ["ØµÙ€", "Ù†Ù€", "Ø¯", "Ùˆ", "Ù‚"] },
            { id: 27, word: "Ø¬Ù…Ù„", missing: "Ù„", shaped: ["Ø¬Ù€", "Ù…Ù€", "Ù„"] },
            { id: 28, word: "Ù„Ø­Ù…", missing: "Ù…", shaped: ["Ù„Ù€", "Ø­Ù€", "Ù…"] },
            { id: 29, word: "Ø­ÙˆØª", missing: "Øª", shaped: ["Ø­Ù€", "Ùˆ", "Øª"] },
            { id: 30, word: "Ø®Ø±ÙˆÙ", missing: "Ù", shaped: ["Ø®Ù€", "Ø±", "Ùˆ", "Ù"] }
        ];

        // âœ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function setLevel(level) {
            currentLevel = level;
            startNewRound();
        }

        // âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function getCurrentWords() {
            if (currentLevel === 1) return wordsLevel1;
            if (currentLevel === 2) return wordsLevel2;
            return wordsLevel3;
        }

        // âœ… Ø®Ù„Ø· Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // âœ… Ø¨Ø¯Ø¡ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function startNewRound() {
            if (isWaiting) return; // Ù…Ù†Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¥Ø°Ø§ Ù†Ø­Ù† ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±

            const words = getCurrentWords();
            const currentWord = words[Math.floor(Math.random() * words.length)];

            // Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„ÙƒÙ„Ù…Ø©
            const imageBox = document.getElementById('imageBox');
            imageBox.innerHTML = `<img src="images/word_photo${currentWord.id}.png" alt="${currentWord.word}">`;

            const wordDropZone = document.getElementById('wordDropZone');
            wordDropZone.dataset.correctLetter = currentWord.missing;
            wordDropZone.dataset.word = currentWord.word;
            wordDropZone.classList.remove('glowing-box');

            // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø±Ø·Ø© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡
            const shapedWord = currentWord.shaped.map(ltr => {
                return (ltr.includes(currentWord.missing))
                    ? `<span class="missing-letter">Ù€</span>`
                    : ltr;
            }).join("");
            wordDropZone.innerHTML = shapedWord;

            setupLetters(currentWord);
        }

        // âœ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø±ÙˆÙ
        function setupLetters(currentWord) {
            const lettersGrid = document.getElementById('lettersGrid');
            lettersGrid.innerHTML = '';

            const allLetters = ['Ù', 'Ø£', 'Ù‚', 'Ù…', 'Ù†', 'Ø¯', 'Ø·', 'Ø³', 'Ø¨', 'ÙŠ', 'Ù„', 'Ø±', 'Ø¦', 'Ø©', 'Øª', 'Ùƒ', 'Ø«', 'Ø¬', 'Ø­', 'Ø®', 'Ø°', 'Ø´', 'Øµ', 'Ø¶', 'Ø¸', 'Ø¹', 'Øº', 'Ù‡Ù€', 'Ùˆ'];
            const lettersToShow = new Set();
            lettersToShow.add(currentWord.missing);

            while (lettersToShow.size < 10) {
                const randomLetter = allLetters[Math.floor(Math.random() * allLetters.length)];
                lettersToShow.add(randomLetter);
            }

            const shuffledOptions = shuffle([...lettersToShow]);

            shuffledOptions.forEach(letter => {
                const div = document.createElement('div');
                div.className = 'letter';
                div.textContent = letter;
                div.draggable = true;
                div.id = `draggable-${letter}`;
                div.addEventListener('dragstart', dragStart);
                lettersGrid.appendChild(div);
            });
        }

        // âœ… Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø­Ø¨
        function dragStart(event) {
            event.dataTransfer.setData('text/plain', event.target.textContent);
            event.dataTransfer.effectAllowed = 'move';
        }

        const dropZone = document.getElementById('wordDropZone');
        dropZone.addEventListener('dragover', e => { e.preventDefault(); });

        // âœ… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø¥Ø³Ù‚Ø§Ø· Ø§Ù„Ø­Ø±Ù
        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            if (isWaiting) return; // Ù…Ù†Ø¹ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±

            const droppedLetter = e.dataTransfer.getData('text/plain');
            const correctLetter = dropZone.dataset.correctLetter;
            const fullWord = dropZone.dataset.word;

            if (droppedLetter === correctLetter) {
                document.getElementById('correctSound').play().catch(() => { });
                correctAnswers++;       // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
                updateStars();          // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

                const draggedElement = document.getElementById(`draggable-${droppedLetter}`);
                if (draggedElement) draggedElement.style.visibility = 'hidden';
                dropZone.textContent = fullWord;
                dropZone.classList.add('glowing-box');

                isWaiting = true;       // Ù…Ù†Ø¹ Ø£ÙŠ ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                setTimeout(() => {
                    isWaiting = false;
                    startNewRound();    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ©
                }, 2000);
            } else {
                document.getElementById('wrongSound').play().catch(() => { });
            }
        });



        // â­ Ø¯Ø§Ù„Ø© Ù…ÙˆØ­Ø¯Ø© Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†Ø¬ÙˆÙ…
        function animateStar(starEl) {
            starEl.style.transform = 'translateX(15px) scale(1.25)'; // Ø­Ø±ÙƒØ© Ù…Ù† Ø§Ù„Ø´Ù…Ø§Ù„
            // ğŸ‘† Ù„Ùˆ Ø¹Ø§ÙŠØ² Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¨Ø¯Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ØŒ ØºÙŠÙ‘Ø± -15px Ø¥Ù„Ù‰ 15px

            setTimeout(() => {
                starEl.style.transform = ''; // ØªØ±Ø¬Ø¹ Ù„Ù…ÙƒØ§Ù†Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠ
            }, 250);
        }








        // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ… Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ø¹ Ø§Ù„Ø­Ø±ÙƒØ©
        function updateStars() {
            if (correctAnswers === 3) {
                const star1 = document.getElementById('star1');
                star1.src = "images/star_red.png";
                animateStar(star1); // â­ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©
            }
            if (correctAnswers === 6) {
                const star2 = document.getElementById('star2');
                star2.src = "images/star_red.png";
                animateStar(star2); // â­ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©
            }
            if (correctAnswers === 9) {
                const star3 = document.getElementById('star3');
                star3.src = "images/star_red.png";
                animateStar(star3); // â­ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©
            }
        }




        // âœ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø´Ø§Ø· ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø¬ÙˆÙ…
        document.getElementById('retryBtn').addEventListener('click', () => {
            correctAnswers = 0;
            document.getElementById('star1').src = "images/star1.png";
            document.getElementById('star2').src = "images/star2.png";
            document.getElementById('star3').src = "images/star3.png";
            isWaiting = false;
            startNewRound();
        });

        // âœ… Ø²Ø± Ø§Ù„Ù‡ÙˆÙ… Ù„Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù†Ø´Ø·Ø©
        document.getElementById('homeBtn').addEventListener('click', () => {
            window.location.href = "activities.html";
        });

        document.addEventListener('DOMContentLoaded', startNewRound);

        // Ù…Ù†Ø¹ Ù‚Ø§Ø¦Ù…Ø© ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ† ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        document.addEventListener('contextmenu', function (e) { e.preventDefault(); });
    </script>
</body>

</html>